# Развертывание веб-приложения с авторизацией через Telegram

## Проблема и решение

Если вы видите белый экран и ошибку "Failed to load resource: the server responded with a status of 404 ()" на GitHub Pages, это связано со следующими проблемами:

1. **Неправильная структура репозитория** - в репозитории были закоммичены `node_modules`, что не допустимо
2. **Отсутствие файлов сборки** - не было правильно настроено развертывание
3. **Неправильная конфигурация GitHub Pages** - файлы должны быть в определенной папке

## Решение

Мы реализовали следующие изменения:

1. **Добавили .gitignore** - для исключения `node_modules` и других ненужных файлов
2. **Создали папку docs** - для размещения файлов сборки, которые будут использоваться GitHub Pages
3. **Настроили GitHub Actions** - для автоматической сборки и развертывания приложения
4. **Исправили конфигурацию путей** - все пути теперь относительные (`./`)

## Структура развертывания

```
репозиторий/
├── .gitignore
├── docs/                 # Содержит файлы для GitHub Pages
│   ├── index.html
│   ├── 404.html
│   ├── favicon.svg
│   └── assets/
│       ├── index-Cy9v_t8s.js
│       └── index-BubDM6PS.css
└── .github/workflows/
    └── deploy.yml       # GitHub Actions workflow
```

## Настройка GitHub Pages

1. Перейдите в настройки репозитория на GitHub
2. Прокрутите до раздела "Pages"
3. В разделе "Source" выберите:
   - Branch: `main`
   - Folder: `/docs`
4. Нажмите "Save"

## Автоматическое развертывание

После настройки GitHub Pages, приложение будет автоматически развертываться при каждом пуше в ветку `main` благодаря GitHub Actions workflow.

### Как работает автоматическое развертывание:

1. При пуше в ветку `main` запускается GitHub Actions workflow
2. Workflow устанавливает зависимости и собирает приложение
3. Собранные файлы копируются в папку `docs`
4. Изменения пушатся в репозиторий
5. GitHub Pages автоматически развертывает содержимое папки `docs`

## Ручное развертывание

Если вы хотите вручную развернуть приложение:

1. Убедитесь, что у вас установлен Node.js 20+
2. Установите зависимости:
   ```bash
   npm install
   ```

3. Соберите приложение:
   ```bash
   npm run build:webauth
   ```

4. Скопируйте файлы в папку docs:
   ```bash
   xcopy distWebAuth docs /E /I
   ```

5. Закоммитьте и запушьте изменения:
   ```bash
   git add .
   git commit -m "Update deployment"
   git push origin main
   ```

## Проверка развертывания

После настройки GitHub Pages и выполнения первого деплоя, ваше приложение будет доступно по адресу:
`https://ваш-логин.github.io/имя-репозитория/`

Например: `https://saraylov.github.io/saraylo_web_app/`

## Возможные проблемы и их решения

### Белый экран при загрузке

1. **Проверьте настройки GitHub Pages** - убедитесь, что выбрана папка `/docs`
2. **Проверьте консоль браузера** - откройте DevTools (F12) и посмотрите ошибки
3. **Проверьте Network tab** - убедитесь, что все ресурсы загружаются успешно

### Ошибки загрузки ресурсов (404)

1. **Проверьте структуру папки docs** - она должна содержать все необходимые файлы
2. **Проверьте пути в index.html** - они должны начинаться с [./](file://e:\DevBuild\AI\AI%20Running\saraylo_web_app\distWebAuth\assets\index-Cy9v_t8s.js)
3. **Убедитесь, что GitHub Actions завершился успешно** - проверьте вкладку Actions в репозитории

### Проблемы с маршрутизацией

Если вы используете клиентскую маршрутизацию, убедитесь, что создан файл [404.html](file://e:\DevBuild\AI\AI%20Running\saraylo_web_app\distWebAuth\404.html) как копия [index.html](file://e:\DevBuild\AI\AI%20Running\saraylo_web_app\distWebAuth\index.html).

## Обновление приложения

Для обновления приложения:

1. Внесите необходимые изменения в код
2. Закоммитьте и запушьте изменения:
   ```bash
   git add .
   git commit -m "Обновление приложения"
   git push origin main
   ```

GitHub Actions автоматически соберет и развернет приложение.

## Локальная разработка

Для локальной разработки:

1. Установите зависимости:
   ```bash
   npm install
   ```

2. Запустите сервер разработки:
   ```bash
   npm run dev:webauth
   ```

3. Откройте в браузере: http://localhost:5177

## Особенности новой версии приложения

Новая версия приложения ([AppWebAuth.svelte](file://e:\DevBuild\AI\AI%20Running\saraylo_web_app\src\AppWebAuth.svelte)) имеет следующие особенности:

1. **Работает как обычный сайт** - не требует запуска внутри Telegram
2. **Поддерживает авторизацию через Telegram** - если пользователь открывает сайт в Telegram Web App
3. **Имеет демо-режим** - для тестирования функционала без Telegram
4. **Корректно отображается** - сохраняет оригинальный дизайн и анимации
5. **Готово к развертыванию** - настроено для GitHub Pages