# Руководство по разработке Svelte веб-приложения

## Структура проекта

```
web_app_svelte/
├── src/
│   ├── App.svelte        # Главный компонент приложения
│   ├── main.ts           # Точка входа в приложение
│   └── app.css           # Глобальные стили
├── public/
│   └── favicon.png       # Фавикон приложения
├── index.html            # Главная HTML страница
├── package.json          # Зависимости и скрипты
├── vite.config.ts        # Конфигурация Vite
├── tsconfig.json         # Конфигурация TypeScript
├── tsconfig.node.json    # Конфигурация TypeScript для Node.js
├── README.md             # Описание проекта
└── DEVELOPMENT.md        # Документация по разработке
```

## Установка и настройка окружения

### Требования

- Node.js версии 20 или выше
- npm (поставляется с Node.js)

### Установка зависимостей

```bash
npm install
```

Эта команда установит все необходимые зависимости, указанные в [package.json](file:///e:/DevBuild/NextRun/web_app_svelte/package.json):

- Svelte и связанные библиотеки
- Vite как сборщик
- TypeScript для типизации
- Telegram Web Apps SDK

## Основные команды

### Запуск в режиме разработки

```bash
npm run dev
```

Запускает сервер разработки с горячей перезагрузкой на `http://localhost:5173`

### Сборка для продакшена

```bash
npm run build
```

Создает оптимизированную сборку в папке `dist/`

### Предварительный просмотр сборки

```bash
npm run preview
```

Запускает локальный сервер для предварительного просмотра собранного приложения

### Проверка типов

```bash
npm run check
```

Выполняет проверку типов TypeScript

## Работа с компонентами

### Создание нового компонента

1. Создайте новый файл с расширением `.svelte` в папке [src/](file:///e:/DevBuild/NextRun/web_app_svelte/src/)
2. Импортируйте его в нужном месте:
   ```svelte
   import MyComponent from './MyComponent.svelte'
   ```
3. Используйте как обычный HTML-элемент:
   ```svelte
   <MyComponent />
   ```

### Структура компонента Svelte

```svelte
<script>
  // Логика компонента
  let name = 'мир'
</script>

<div>
  <!-- Разметка компонента -->
  <h1>Привет, {name}!</h1>
</div>

<style>
  /* Стили компонента */
  h1 {
    color: #00BFFF;
  }
</style>
```

## Работа со стилями

### Глобальные переменные

Глобальные CSS переменные определены в [src/app.css](file:///e:/DevBuild/NextRun/web_app_svelte/src/app.css):
- `--primary-blue`: #00BFFF
- `--primary-pink`: #FF1493
- `--deep-black`: #000000
- `--glass-bg`: rgba(255, 255, 255, 0.1)
- `--glass-border`: rgba(255, 255, 255, 0.2)

### Glassmorphism классы

Для создания эффекта "жидкого стекла" используйте готовые CSS классы:
- `.glass-panel`: Основная стеклянная панель
- `.telegram-auth-button`: Кнопка авторизации с эффектом стекла

### Адаптивность

Используйте медиа-запросы для адаптации под разные экраны:
```css
@media (max-width: 768px) {
  .container {
    padding: 1rem;
  }
}
```

## Интеграция с Telegram

### Инициализация

```typescript
import { onMount } from 'svelte'

onMount(() => {
  if (typeof window !== 'undefined' && window.Telegram?.WebApp) {
    window.Telegram.WebApp.ready()
    window.Telegram.WebApp.expand()
  }
})
```

### Методы API

Основные методы Telegram Web App API доступны через `window.Telegram.WebApp`:
- `WebApp.ready()`: Сообщает Telegram, что приложение готово
- `WebApp.expand()`: Раскрывает приложение на весь экран
- `WebApp.close()`: Закрывает приложение
- `WebApp.MainButton`: Объект для работы с основной кнопкой

## Рекомендации по разработке

### Производительность

1. Минимизируйте количество DOM элементов
2. Используйте реактивные переменные только когда это необходимо
3. Избегайте тяжелых вычислений в компонентах
4. Оптимизируйте анимации (предпочтительно CSS вместо JavaScript)

### Доступность

1. Используйте семантические HTML теги
2. Добавляйте атрибуты `aria-label` для интерактивных элементов
3. Обеспечьте достаточный контраст цветов
4. Проверяйте навигацию с клавиатуры

### Типизация

1. Используйте TypeScript для типизации данных
2. Создавайте интерфейсы для сложных объектов
3. Указывйте типы для функций и переменных

Пример:
```typescript
interface User {
  id: number
  name: string
  telegramId: string
}

let currentUser: User | null = null
```

## Отладка

### Инструменты разработчика

Используйте инструменты разработчика браузера:
1. Вкладка Elements для проверки DOM структуры
2. Вкладка Console для просмотра ошибок и логов
3. Вкладка Network для анализа сетевых запросов
4. Вкладка Performance для анализа производительности

### Логирование

Используйте `console.log()` для отладки:
```typescript
console.log('Значение переменной:', variable)
```

Для ошибок используйте `console.error()`:
```typescript
console.error('Ошибка авторизации:', error)
```

## Тестирование

### Ручное тестирование

1. Проверьте отображение на разных размерах экранов
2. Протестируйте все интерактивные элементы
3. Проверьте работу в разных браузерах
4. Убедитесь в корректной работе анимаций

### Автоматическое тестирование

(В будущем можно добавить инструменты для автоматического тестирования)

## Развертывание

### Сборка проекта

```bash
npm run build
```

Собранные файлы будут находиться в папке `dist/`

### Деплой

1. Скопируйте содержимое папки `dist/` на сервер
2. Настройте веб-сервер для отдачи статических файлов
3. Убедитесь, что маршрутизация настроена правильно (все запросы ведут к index.html)

## Решение проблем

### Частые ошибки

1. **"Module not found"**: Проверьте правильность импортов и наличие файлов
2. **"TypeScript error"**: Проверьте типы и интерфейсы
3. **Стили не применяются**: Проверьте специфичность селекторов и порядок импортов

### Полезные ссылки

- [Документация Svelte](https://svelte.dev/docs)
- [Документация Vite](https://vitejs.dev/guide/)
- [Telegram Web App API](https://core.telegram.org/bots/webapps)